{% extends './base.html' %} 
{% load static %} 
{% block content %}

<div class="wrapper">
<!-- Sidebar -->
{% include "./includes/sidebar.html" %}

<div class="main-panel">
<div class="main-header" style="background: content-box !important">
<div class="main-header-logo">
<!-- navbar -->
{% include "./includes/navbar.html" %}
</div>

<!--main content-->

<div class="container">
<div class="row">
<h3 class="fw-bold ms-3 ps-3 pt-3">Material</h3>
<div class="page-header mt-1">
<div class="col-md-9 col-sm-4">
<ul class="breadcrumbs mb-3">
<li class="nav-home">
<a href="{%url 'ajserp:dashboard'%}">
<i class="icon-home"></i>
</a>
</li>
<li class="separator">
<i class="icon-arrow-right"></i>
</li>
<li class="nav-item">
<a href="#">Inventory</a>
</li>
<li class="separator">
<i class="icon-arrow-right"></i>
</li>
<li class="nav-item">
<a href="#">Material</a>
</li>
</ul>
</div>

<div class="col-md-3 text-end">
<p class="demo">
<button
type="button"
data-bs-toggle="modal"
data-bs-target="#myModalimport"
title=" "
class="btn btn-primary btn-round"
data-original-title=""
style="width: 91px; height: 36px"
>
Import
</button>
<a
href="{%url 'ajserp:addmaterial'%}"
class="btn btn-primary btn-round"
style="width: 91px; height: 36px; padding-top: 6px"
>Add</a
>
</p>

<!-- ========import model================== -->
<div class="modal fade" id="myModalimport">
<div class="modal-dialog">
<div class="modal-content">
<!-- Modal Header -->
<div class="modal-header">
<h4 class="modal-title">Import Items</h4>
<button
type="button"
class="btn-close"
data-bs-dismiss="modal"
></button>
</div>

<!-- Modal body -->
<div class="modal-body">
<div class="container" style="text-align: center">
<h2></h2>
<br />
<div class="mb-3">
<input
class="form-control"
type="file"
id="formFile"
/>
</div>
<p>Required : Name, Unit and Sell Price</p>
</div>
</div>
<!-- Modal footer -->
<div class="modal-footer">
<button
type="button"
class="btn btn-success"
data-bs-dismiss="modal"
>
Submit
</button>
</div>
</div>
</div>
</div>
</div>
</div>
</div>

<div class="container-fluid">
<div class="col-md-12">
<div class="card">
<div class="">
<div class="card-body" style="padding: 1.25rem">
<div class="container mt-3">
<div class="card p-4">
<!-- ADD THIS FORM TAG -->
<form method="GET" id="filterForm">
<div class="row g-3 align-items-end mb-2">
<!-- Material name -->
<div class="col-md-4">
<input type="text" 
           id="materialNameInput" 
           name="material_name" 
           class="form-control" 
           placeholder="Start typing material name..." 
           value="{{ request.GET.material_name }}"
           autocomplete="off">
    <div id="materialNameSuggestions" class="autocomplete-suggestions"></div>
</div>
<!-- Category -->
<div class="col-md-2">
<select class="form-select" id="categorySelect" name="category">
<option selected value="">Select Category</option>
<option value="Service" {% if request.GET.category == "Service" %}selected{% endif %}>Service</option>
<option value="Material" {% if request.GET.category == "Material" %}selected{% endif %}>Material</option>
<option value="Spare" {% if request.GET.category == "Spare" %}selected{% endif %}>Spare</option>
</select>
</div>

<!-- Brand -->
<div class="col-md-2">
<select class="form-select" id="brandSelect" name="brand">
 <option value="">Select Brand</option>
            {% for brand in material_brands %}
            <option value="{{ brand.name }}" {% if request.GET.brand == brand.name %}selected{% endif %}>
                {{ brand.name }}
            </option>
            {% endfor %}
</select>
</div>

<!-- Status -->
<div class="col-md-2">
<select class="form-select" id="statusSelect" name="status">
<option selected value="">Select Status</option>
<option value="Active" {% if request.GET.status == "Active" %}selected{% endif %}>Active</option>
<option value="Inactive" {% if request.GET.status == "Inactive" %}selected{% endif %}>Inactive</option>
</select>
</div>

<!-- Search Button -->
<div class="col-12 col-md-2">
<button type="submit" class="btn btn-primary w-50">Search</button>

</div>
</div>
</div>
</form>  <!-- CLOSE FORM TAG -->
</div>
</div>

<!-- =================================items table start======================== -->

<div class="row">
<div class="col-md-12">
<div class="card">
<!-- bg-light = light gray background -->
<div class="card-body">
<div class="d-flex gap-2">
<div
class="d-flex justify-content-between"
style="width: 95%"
>
<!-- Left Search Box -->
<div class="input-group" style="width: 300px">
<input type="text" 
           id="globalSearchInput" 
           name="q" 
           class="form-control" 
           placeholder="Search material code, name, category..." 
           value="{{ request.GET.q }}"
           autocomplete="off"/>
    <button class="btn btn-primary" type="button" onclick="performGlobalSearch()">
        Search
    </button>
   
    <div id="globalSearchSuggestions" class="autocomplete-suggestions"></div>
     
</div>

<div class="input-group" style="width: 300px">
 {% if request.GET %}
<a href="{% url 'ajserp:material' %}" class="btn btn-secondary w-50 mt-1">Clear</a>
{% endif %}
</div>

<!-- Right Export Button -->
<div class="dropdown">
<button
class="btn btn-primary btn-round dropdown-toggle"
data-bs-toggle="dropdown"
style="
color: white;
width: 91px;
height: 36px;
"
>
Export
</button>
<ul class="dropdown-menu import_1">
<li>
<a class="dropdown-item" href="#">Excel</a>
</li>
<li>
<a class="dropdown-item" href="#">PDF</a>
</li>
</ul>
</div>
</div>
</div>
</div>

<!-- Search Results Info -->
<div class="card-body">
    <div class="d-flex justify-content-between align-items-center">
        <div>
            {% if request.GET %}
                <p class="mb-0 text-muted">
                    Found <strong>{{ materials.count }}</strong> material(s) matching your search
                    {% if request.GET.q %}for "{{ request.GET.q }}"{% endif %}
                </p>
            {% else %}
                <p class="mb-0 text-muted">Total materials: <strong>{{ materials.count }}</strong></p>
            {% endif %}
        </div>
    </div>
</div>

<div class="table-responsive">
<table
id="basic-datatables"
class="display table table-bordered table-sm table-striped align-middle table-hover text-center" style="border: 1px solid #d2caca;"
>
<thead style="padding: 13px 9px !important">
<tr>
<th style="padding: 13px 9px !important">
<input type="checkbox" id="selectAll">
</th>
<th style="padding: 4px 0px !important">
Material Code
</th>
<th style="padding: 13px 9px !important">
Material Name
</th>
<th style="padding: 5px 0px !important">UOM</th>
<th>Category</th>
<th style="padding: 10px 9px !important">
Modal
</th>
<th style="padding: 13px 9px !important">
Brand
</th>
{% comment %} <th style="padding: 13px 9px !important">MRP</th>
<th style="padding: 13px 9px !important">Selling Price</th> {% endcomment %}

<th style="padding: 13px 9px !important">
HSN Code
</th>
<th style="padding: 13px 9px !important">
MRP
</th>
<th style="padding: 13px 9px !important">
Selling Price
</th>
<th style="padding: 13px 9px !important">
from date
</th>
<th style="padding: 13px 9px !important">
to date
</th>
<th style="padding: 13px 9px !important">
Status
</th>


<th style="padding: 13px 9px !important">
Action
</th>
</tr>
</thead>

{% comment %} <tbody>
<tr>
<td style="padding: 0px !important">
<input type="checkbox" class="rowCheckbox">
</td>
<td
data-bs-toggle="modal"
data-bs-target="#myModalitems"
style="padding: 4px 0px !important"
>
<a href="#"> FG0001</a>
</td>
<td style="padding: 4px 0px !important">
solar Power
</td>
<td style="padding: 4px 0px !important">
500 Kg
</td>
<td style="padding: 4px 0px !important">
Service
</td>
<td style="padding: 4px 0px !important">
M600
</td>
<td style="padding: 4px 0px !important">
Power Solar
</td>
<td style="padding: 4px 0px !important">
12445
</td>
<td>
<div class="form-button-action">
<button
type="button"
data-bs-toggle="tooltip"
title=""
class="btn btn-link btn-primary btn-lg"
data-original-title="Edit Task"
>
<i class="fa fa-edit"></i>
</button>

<button
type="button"
data-bs-toggle="modal"
data-bs-target="#myModaldelete"
title=""
class="btn btn-link btn-danger"
data-original-title="Remove"
>
<i class="fa fa-times"></i>
</button>
</div>
</td>
</tr>
<tr>
<td><input type="checkbox" class="rowCheckbox"></td>
<td
data-bs-toggle="modal"
data-bs-target="#myModalitems"
>
<a href="#">FG0004</a>
</td>
<td style="padding: 4px 0px !important">
solar Power
</td>
<td style="padding: 4px 0px !important">
500 Kg
</td>
<td style="padding: 4px 0px !important">
Service
</td>
<td style="padding: 4px 0px !important">
M600
</td>
<td style="padding: 4px 0px !important">
Power Solar
</td>
<td style="padding: 4px 0px !important">
12445
</td>
<td>
<div class="form-button-action">
<button
type="button"
data-bs-toggle="tooltip"
title=""
class="btn btn-link btn-primary btn-lg"
data-original-title="Edit Task"
>
<i class="fa fa-edit"></i>
</button>
<button
type="button"
data-bs-toggle="tooltip"
title=""
class="btn btn-link btn-danger"
data-original-title="Remove"
>
<i class="fa fa-times"></i>
</button>
</div>
</td>
</tr>
</tbody> {% endcomment %}

<tbody>
    {% for material in materials %}
    {% if material.category %}
    <tr>
        <td><input type="checkbox" class="rowCheckbox"></td>

        <!-- Click to open VIEW modal -->
        <td data-bs-toggle="modal" data-bs-target="#viewModal{{ material.id }}">
            <a href="#">{{ material.material_code }}</a>
        </td>

        <td>{{ material.material_name }}</td>
        <td>{{ material.uom }}</td>
        <td>{{ material.category }}</td>
        <td>{{ material.model }}</td>
        <td>{{ material.brand }}</td>
        <td>{{ material.hsn_code }}</td>
        <td>{{ material.mrp }}</td>
        <td>{{ material.selling_price }}</td>
        <td>{{ material.price_from_date|date:'Y-m-d' }}</td>
        <td>{{ material.price_to_date|date:'Y-m-d' }}</td>
        <td>
            <span class="badge {% if material.pricing_status == 'Active' %}bg-success{% else %}bg-danger{% endif %}">
                {{ material.pricing_status }}
            </span>
        </td>

        <td>
            <div class="form-button-action">

                <!-- EDIT BUTTON -->
                <button type="button" data-bs-toggle="modal" 
                        data-bs-target="#editModal{{ material.material_code }}"
                        class="btn btn-link btn-primary btn-lg">
                    <i class="fa fa-edit"></i>
                </button>

                <!-- DELETE BUTTON -->
                <button type="button" data-bs-toggle="modal"
                        data-bs-target="#deleteModal{{ material.id }}"
                        class="btn btn-link btn-danger">
                    <i class="fa fa-times"></i>
                </button>
            </div>
        </td>
    </tr>

    <!-- ================= VIEW MODAL ================== -->
<div class="modal fade" id="viewModal{{ material.id }}">
    <div class="modal-dialog modal-xl"> <!-- Larger like create page -->
        <div class="modal-content">

            <div class="modal-header bg-light">
                <h4 class="modal-title fw-bold">
                    View Material — {{ material.material_code }}
                </h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>

            <div class="modal-body">

                <div class="card border">
                    <div class="card-header bg-white">
                        <h5 class="mb-0 fw-bold">Material Information</h5>
                    </div>

                    <div class="card-body">
                        <div class="row g-4">

                            <!-- Material Code -->
                            <div class="col-md-4">
                                <label class="form-label fw-semibold">Material Code</label>
                                <input type="text" class="form-control" value="{{ material.material_code }}" readonly>
                            </div>

                            <!-- Category -->
                            <div class="col-md-4">
                                <label class="form-label fw-semibold">Category</label>
                                <input type="text" class="form-control" value="{{ material.category }}" readonly>
                            </div>

                            <!-- UOM -->
                            <div class="col-md-4">
                                <label class="form-label fw-semibold">UOM</label>
                                <input type="text" class="form-control" value="{{ material.uom }}" readonly>
                            </div>

                            <!-- Material Name -->
                            <div class="col-md-4">
                                <label class="form-label fw-semibold">Material Name</label>
                                <input type="text" class="form-control" value="{{ material.material_name }}" readonly>
                            </div>

                            <!-- Model -->
                            <div class="col-md-4">
                                <label class="form-label fw-semibold">Model</label>
                                <input type="text" class="form-control" value="{{ material.model }}" readonly>
                            </div>

                            <!-- Brand -->
                            <div class="col-md-4">
                                <label class="form-label fw-semibold">Brand</label>
                                <input type="text" class="form-control" value="{{ material.brand }}" readonly>
                            </div>

                            <!-- HSN Code -->
                            <div class="col-md-4">
                                <label class="form-label fw-semibold">HSN Code</label>
                                <input type="text" class="form-control" value="{{ material.hsn_code }}" readonly>
                            </div>

                            <!-- Description -->
                            <div class="col-md-8">
                                <label class="form-label fw-semibold">Description</label>
                                <textarea class="form-control" rows="3" readonly>{{ material.description }}</textarea>
                            </div>

                            <!-- Image -->
                            <div class="col-md-12 text-center mt-4">
                                <h6 class="fw-semibold">Material Image</h6>

                                {% if material.image %}
                                    <img src="{{ material.image.url }}" 
                                         class="img-thumbnail shadow-sm" 
                                         style="width:180px; border-radius:10px;">
                                {% else %}
                                    <img src="{% static 'default-material.png' %}" 
                                         class="img-thumbnail" 
                                         style="width:150px; opacity:0.4;">
                                    <p class="text-muted">No image uploaded</p>
                                {% endif %}
                            </div>

                        </div>
                    </div>
                </div>

            </div>

            <div class="modal-footer">
                <button class="btn btn-danger" data-bs-dismiss="modal">Close</button>
            </div>

        </div>
    </div>
</div>

    
<!-- ================= EDIT MODAL ================== -->
<div class="modal fade" id="editModal{{ material.material_code }}">
    <div class="modal-dialog modal-xl"> <!-- Bigger like add page -->
        <div class="modal-content">

            <div class="modal-header bg-light">
                <h4 class="modal-title fw-bold">Edit Material — {{ material.material_code }}</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>

            <!-- IMPORTANT: Correct POST URL -->
            <form method="POST" action="{% url 'ajserp:material_update' material.material_code %}" enctype="multipart/form-data">
                {% csrf_token %}

                <div class="modal-body">

                    <div class="card border">
                        <div class="card-header bg-white">
                            <h5 class="mb-0 fw-bold">Material Details</h5>
                        </div>

                        <div class="card-body">
                            <div class="row g-4">

                                <!-- Category -->
                                <div class="col-md-4">
                                    <label class="form-label fw-semibold">Category</label>
                                    <select class="form-select" name="category" required>
                                        <option value="Service" {% if material.category == "Service" %}selected{% endif %}>Service</option>
                                        <option value="Material" {% if material.category == "Material" %}selected{% endif %}>Material</option>
                                        <option value="Spare" {% if material.category == "Spare" %}selected{% endif %}>Spare</option>
                                    </select>
                                </div>

                                <!-- Material Name -->
                                <div class="col-md-4">
                                    <label class="form-label fw-semibold">Material Name</label>
                                    <input type="text" name="material_name" class="form-control" value="{{ material.material_name }}" required>
                                </div>

                                <!-- UOM -->
                                <div class="col-md-4">
                                    <label class="form-label fw-semibold">UOM</label>
                                    <input type="text" name="uom" class="form-control" value="{{ material.uom }}" required>
                                </div>

                                <!-- Model -->
                                <div class="col-md-4">
                                    <label class="form-label fw-semibold">Model</label>
                                    <select class="form-select" name="model">
                                        <option value="">Select Model</option>
                                        {% for model in material_models %}
                                            <option value="{{ model.name }}" {% if material.model and material.model.name == model.name %}selected{% endif %}>
                                                {{ model.name }}
                                            </option>
                                        {% endfor %}
                                    </select>
                                </div>

                                <!-- Brand -->
                                <div class="col-md-4">
                                    <label class="form-label fw-semibold">Brand</label>
                                    <select class="form-select" name="brand">
                                        <option value="">Select Brand</option>
                                        {% for brand in material_brands %}
                                            <option value="{{ brand.name }}" {% if material.brand and material.brand.name == brand.name %}selected{% endif %}>
                                                {{ brand.name }}
                                            </option>
                                        {% endfor %}
                                    </select>
                                </div>

                                <!-- HSN CODE -->
                                <div class="col-md-4">
                                    <label class="form-label fw-semibold">HSN Code</label>
                                    <input type="text" name="hsn_code" class="form-control" value="{{ material.hsn_code|default_if_none:'' }}" required>
                                </div>

                                <!-- Description -->
                                <div class="col-md-12">
                                    <label class="form-label fw-semibold">Description</label>
                                    <textarea name="description" rows="3" class="form-control">{{ material.description }}</textarea>
                                </div>

                                <!-- Image -->
                                <div class="col-md-12">
                                    <label class="form-label fw-semibold">Update Image</label>
                                    <input type="file" name="image" class="form-control">

                                    <div class="mt-3 text-center">
                                        {% if material.image %}
                                            <img src="{{ material.image.url }}" class="img-thumbnail" style="width:150px;">
                                        {% else %}
                                            <img src="{% static 'default-material.png' %}" class="img-thumbnail" style="width:150px; opacity:0.5;">
                                        {% endif %}
                                    </div>
                                </div>

                            </div><!-- row end -->
                        </div><!-- card-body end -->
                    </div><!-- card end -->

                </div><!-- modal-body end -->

                <div class="modal-footer">
                    <button class="btn btn-danger" data-bs-dismiss="modal">Cancel</button>
                    <button class="btn btn-success" type="submit">Save Changes</button>
                </div>

            </form>

        </div>
    </div>
</div>

    

    <!-- ================= DELETE MODAL ================== -->
    <div class="modal fade" id="deleteModal{{ material.id }}">
        <div class="modal-dialog">
            <div class="modal-content">

                <div class="modal-header">
                    <h4 class="modal-title">Delete</h4>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>

                <form method="POST" action={% url 'ajserp:material_remove' material.material_code %}
>
                    {% csrf_token %}
                    <div class="modal-body text-center">
                        <p>Are you sure you want to delete <strong>{{ material.material_name }}</strong>?</p>
                    </div>

                    <div class="modal-footer">
                        <button class="btn btn-danger" type="submit">Yes, Delete</button>
                        <button class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    </div>
                </form>

            </div>
        </div>
    </div>

    {% endif %}
    {% endfor %}
</tbody>

</table>
</div>
<nav aria-label="Page navigation example">
<ul class="pagination justify-content-end">
<li class="page-item disabled">
<a class="page-link">Previous</a>
</li>
<li class="page-item">
<a class="page-link" href="#">1</a>
</li>
<li class="page-item active">
<a class="page-link" href="#">2</a>
</li>
<li class="page-item">
<a class="page-link" href="#">3</a>
</li>
<li class="page-item">
<a class="page-link" href="#">Next</a>
</li>
</ul>
</nav>

<!-- The Modal -->
<div class="modal fade" id="myModaldelete">
<div class="modal-dialog">
<div class="modal-content">
<!-- Modal Header -->
<div class="modal-header">
<h4 class="modal-title"></h4>
<button
type="button"
class="btn-close"
data-bs-dismiss="modal"
></button>
</div>

<!-- Modal body -->
<div class="modal-body">
<div
class="container"
style="text-align: center"
>
<h2>Delete Confirmation</h2>
<br />
<p>
Are you sure you want to delete this
Estimate account?
</p>
</div>
</div>

<!-- Modal footer -->
<div
class="modal-footer"
style="display: inline; text-align: center"
>
<button
type="button"
class="btn btn-success"
data-bs-dismiss="modal"
>
Yes
</button>
<button
type="button"
class="btn btn-danger"
data-bs-dismiss="modal"
>
No
</button>
</div>
</div>
</div>
</div>

<!-- The Modal -->
<div class="modal fade" id="myModalitems">
<div class="modal-dialog modal-lg">
<div class="modal-content">
<!-- Modal Header -->
<div class="modal-header">
<h4 class="modal-title">Create Material</h4>
<button
type="button"
class="btn-close"
data-bs-dismiss="modal"
></button>
</div>
<div class="">
<!-- Card header with title and Active checklist -->
<div
class="card-header d-flex justify-content-between align-items-center"
>
<div class="card-title mb-0"></div>

<div class="d-flex align-items-center">
<label class="form-label me-3 mb-1"
>Active:</label
>
<div
class="form-check form-check-inline pb-2 ps-3"
>
<input
class="form-check-input"
type="checkbox"
id="activeYes"
value="Yes"
/>
<label
class="form-check-label"
for="activeYes"
>Yes</label
>
</div>
<div
class="form-check form-check-inline pb-2"
style="padding-left: 4px"
>
<input
class="form-check-input"
type="checkbox"
id="activeNo"
value="No"
/>
<label
class="form-check-label"
for="activeNo"
>No</label
>
</div>
</div>
</div>
<!--view content start-->



<!-- ==================end model============== -->
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
{% comment %} {% for material in materials %}
<!-- ========= VIEW MODAL ========= -->
<div class="modal fade" id="viewModal{{ material.id }}">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">{{ material.material_name }} ({{ material.material_code }})</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>

            <div class="modal-body">
                <div class="row">
                    <div class="col-md-6">
                        <p><strong>Material Code:</strong> {{ material.material_code }}</p>
                        <p><strong>Category:</strong> {{ material.category }}</p>
                        <p><strong>Model:</strong> {{ material.model }}</p>
                        <p><strong>Brand:</strong> {{ material.brand }}</p>
                    </div>

                    <div class="col-md-6">
                        <p><strong>UOM:</strong> {{ material.uom }}</p>
                        <p><strong>HSN Code:</strong> {{ material.hsn_code }}</p>
                        <p><strong>MRP:</strong> {{ material.mrp }}</p>
                        <p><strong>Selling Price:</strong> {{ material.selling_price }}</p>
                    </div>

                    <div class="col-md-12 mt-3">
                        <strong>Description:</strong>
                        <p>{{ material.description|default:"No description" }}</p>
                    </div>

                    <div class="col-md-12 text-center mt-3">
                        {% if material.image %}
                            <img src="{{ material.image.url }}" style="width:150px; height:auto; border-radius:10px;">
                        {% else %}
                            <img src="{% static 'default-material.png' %}" style="width:150px; height:auto; opacity:0.4;">
                            <p class="text-muted">No Image Uploaded</p>
                        {% endif %}
                    </div>
                </div>
            </div>

            <div class="modal-footer">
                <button class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<!-- ========= EDIT MODAL ========= -->
<div class="modal fade" id="editModal{{ material.id }}">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Edit Material - {{ material.material_code }}</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>

            <form method="POST"  action="{% url 'ajserp:material_update' material.id %}" enctype="multipart/form-data">
                {% csrf_token %}
                <div class="modal-body">
                    <!-- Put your edit form fields here (same names as your view expects) -->
                    <div class="row">
                        <div class="col-md-6">
                            <div class="form-group">
                                <label>Category</label>
                                <input type="text" name="category" class="form-control" value="{{ material.category }}" required>
                            </div>
                            <div class="form-group">
                                <label>Description</label>
                                <textarea name="description" class="form-control" rows="3">{{ material.description }}</textarea>
                            </div>
                        </div>

                        <div class="col-md-6">
                            <div class="form-group">
                                <label>Material Name</label>
                                <input type="text" name="material_name" class="form-control" value="{{ material.material_name }}" required>
                            </div>
                            <div class="form-group">
                                <label>UOM</label>
                                <input type="text" name="uom" class="form-control" value="{{ material.uom }}" required>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="submit" class="btn btn-primary">Save Changes</button>
                </div>
            </form>

        </div>
    </div>
</div>

<!-- ========= DELETE MODAL ========= -->
<div class="modal fade" id="deleteModal{{ material.id }}">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">Delete Material</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>

            <form method="POST">
                {% csrf_token %}
                <div class="modal-body text-center">
                    <p>Are you sure you want to delete <strong>{{ material.material_name }}</strong>?</p>
                </div>

                <div class="modal-footer">
                    <button type="submit" class="btn btn-danger">Yes, Delete</button>
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                </div>
            </form>

        </div>
    </div>
</div>
{% endfor %}

 {% endcomment %}

<!-- ======================table end main content======================== -->

<!-- ====================footer start========================= -->

{% include "./includes/footer.html" %}
</div>
<!-- custom template setting -->
{% include "./includes/template_setting.html" %}
</div>
</div>



{% endblock %}