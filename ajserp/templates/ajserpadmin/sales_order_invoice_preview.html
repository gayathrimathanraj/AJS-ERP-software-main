<!DOCTYPE html>
<html>
<head>
    {% load static %}
    <meta charset="utf-8">
    <style>
        @page {
            size: A4;
            margin: 0.3cm;
        }
        body {
            font-family: Arial, sans-serif;
            font-size: 9px;
            line-height: 1.1;
            margin: 0;
            padding: 8px;
            color: #000;
        }

        table { width: 100%; border-collapse: collapse; }
        .tiny { font-size: 7px; color: #666; }
    </style>
</head>
<body>

<!-- HEADER WITH LOGO + COMPANY INFO -->
<table style="width:100%; border:1px solid #ccc; padding:6px; margin-bottom:8px; font-size:9px;">
    <tr>

        <!-- LOGO -->
        <td style="width:20%; text-align:center; vertical-align:middle;">
            <img src="{% static 'logo/logo.png' %}" style="width:70px; height:auto;">
        </td>

        <!-- COMPANY INFO -->
        <td style="width:80%; text-align:center; vertical-align:middle;">
            <div style="font-size:25px; font-weight:bold; color:#003366;">AJ SOLAR</div>
            <div style="font-size:20px; font-weight:bold; margin-bottom:3px;">LITTLE RAY</div>

            <div style="font-size:9px; line-height:1.3;">
                KBM Complex, Poovalur Road, Shanthi Nagar,<br>
                Sakthi Hospital (Opp), Lalgudi, Trichy â€“ 621601.
            </div>

            <div style="font-size:9px; line-height:1.2;">
                <b>Mobile:</b> 9790403047 / 8525035361 &nbsp;&nbsp;&nbsp;
                <b>Email:</b> ajsolar@gmail.com &nbsp;&nbsp;&nbsp;
                <b>GSTIN:</b> 33CEDPB5711A12G
            </div>
        </td>

    </tr>
</table>

<!-- SALES INVOICE TITLE -->
<div style="text-align:center; font-size:14px; font-weight:bold; margin:4px 0; padding:4px 0; background:#64B5F6">
    SALES INVOICE
</div>

<!-- CUSTOMER + ORDER DETAILS -->
<table style="width:100%; border:1px solid #ccc; padding:5px; margin-bottom:10px; font-size:9px;">
    <tr>

        <!-- CUSTOMER -->
        <td style="width:33%; vertical-align:top; padding:4px; border-right:1px solid #ccc;">
            <strong>Bill To:</strong><br>
            {{ customer_name }}<br>
            {{ address1 }}<br>
            {{ city }}<br>
        </td>

        <!-- SHIPPING -->
        <td style="width:33%; vertical-align:top; padding:4px; border-right:1px solid #ccc;">
            <strong>Ship To:</strong><br>
            {{ customer_name }}<br>
            {{ address1 }}<br>
            {{ city }}<br>
        </td>

        <!-- INVOICE DETAILS -->
        <td style="width:34%; vertical-align:top; padding:4px;">
            <strong>Details:</strong><br>

            <b>Invoice No:</b> {{ ref_number|default:"-" }}<br>
            <b>Date:</b> {{ date }}<br>

            <b>Payment Terms:</b> Immediate Payment<br>
        </td>
    </tr>
</table>

<!-- ITEMS TABLE -->
<table style="width:100%; margin-bottom:5px; font-size:8px; border:1px solid #ccc;">
    <thead>
        <tr style="background:#fff;">
            <th style="width:40%; border:1px solid #ccc; padding:6px;">Material</th>
            <th style="width:8%; border:1px solid #ccc; padding:6px;">Qty</th>
            <th style="width:10%; border:1px solid #ccc; padding:6px;">Rate</th>
            <th style="width:10%; border:1px solid #ccc; padding:6px;">Disc</th>
            <th style="width:12%; border:1px solid #ccc; padding:6px;">Basic</th>
            <th style="width:10%; border:1px solid #ccc; padding:6px;">Tax</th>
            <th style="width:10%; border:1px solid #ccc; padding:6px;">Amount</th>
        </tr>
    </thead>

    <tbody>
        {% for item in items %}
        <tr>
            <td style="padding:6px; border:1px solid #eee;">{{ item.material }}</td>
            <td style="text-align:center; padding:6px; border:1px solid #eee;">{{ item.qty }}</td>
            <td style="text-align:right; padding:6px; border:1px solid #eee;">{{ item.rate }}</td>
            <td style="text-align:right; padding:6px; border:1px solid #eee;">{{ item.discount }}</td>
            <td style="text-align:right; padding:6px; border:1px solid #eee;">{{ item.basic }}</td>
            <td style="text-align:right; padding:6px; border:1px solid #eee;">{{ item.tax }}</td>
            <td style="text-align:right; padding:6px; border:1px solid #eee;">{{ item.total }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<!-- TOTAL SECTION -->
<table style="width:100%; border:1px solid #ccc; margin-top:5px; font-size:8px;">
    <tr>
        <td style="width:60%; padding:6px; font-weight:bold;">TOTAL</td>
        <td style="width:20%; padding:6px; text-align:right;">Taxable: {{ total_basic }}</td>
        <td style="width:20%; padding:6px; text-align:right;">Grand Total: {{ grand_total }}</td>
    </tr>
</table>

<!-- FOOTER -->
<table style="width:100%; margin-top:20px;">
    <tr>
        <td style="width:70%; padding:6px;">
            <strong>Terms & Conditions:</strong><br>
            1. Goods once sold cannot be returned.<br>
            2. GST Included.<br>
            3. Warranty as per manufacturer policy.<br>
        </td>

        <td style="width:30%; text-align:center; vertical-align:bottom;">
            <strong>Authorised Signatory</strong>
            <div style="margin-top:40px;">AJ SOLAR</div>
        </td>
    </tr>
</table>

</body>
</html>
