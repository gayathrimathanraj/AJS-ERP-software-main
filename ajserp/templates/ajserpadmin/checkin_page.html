{% extends "./base.html" %}
{% load static %}
{% block content %}

<style>
/* Page Title */
.page-title {
    text-align: center;
    font-size: 20px;
    font-weight: 700;
    margin-bottom: 20px;
    color: #0d6efd;
}

/* CRM Grid */
.crm-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);  /* Desktop: 4 per row */
    gap: 18px;
    text-align: center;
}

@media (max-width: 992px) {
    .crm-grid {
        grid-template-columns: repeat(3, 1fr); /* Tablet */
    }
}

@media (max-width: 576px) {
    .crm-grid {
        grid-template-columns: repeat(2, 1fr); /* Mobile */
    }
}

/* CRM Icon Box */
.crm-box {
    background: #ffffff;
    border-radius: 14px;
    padding: 16px 10px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.08);
    transition: 0.2s;
    cursor: pointer;
}

.crm-box:hover {
    transform: translateY(-4px);
}

/* Icon */
.crm-icon {
    font-size: 32px;
    color: #0d6efd;
    margin-bottom: 6px;
}

/* Label */
.crm-label {
    font-size: 12px;
    font-weight: 600;
    color: #444;
}

/* Link */
a.crm-link {
    text-decoration: none;
}

/* Dropdown sections */
#workOptions, #imageUploadBox {
    margin-top: 10px;
}

/* Disabled checkout */
#checkout_btn {
    opacity: 0.5;
    pointer-events: none;
}
</style>

<div class="container mt-4">

    <div class="page-title">CRM ACTIONS</div>

    <div class="card p-3">

        <div class="crm-grid">

            <!-- Estimate -->
            <a href="{% url 'ajserp:estimate' %}" class="crm-link">
                <div class="crm-box">
                    <i class="fas fa-file-alt crm-icon"></i>
                    <div class="crm-label">Estimate</div>
                </div>
            </a>

            <!-- Sales Order -->
            <a href="{% url 'ajserp:salesorders' %}" class="crm-link">
                <div class="crm-box">
                    <i class="fas fa-shopping-cart crm-icon"></i>
                    <div class="crm-label">Sales Order</div>
                </div>
            </a>

            <!-- Sales Invoice -->
            <a href="{% url 'ajserp:salesinvoice' %}" class="crm-link">
                <div class="crm-box">
                    <i class="fas fa-file-invoice-dollar crm-icon"></i>
                    <div class="crm-label">Sales Invoice</div>
                </div>
            </a>

            <!-- Receipt -->
            <a href="{% url 'ajserp:receipts' %}" class="crm-link">
                <div class="crm-box">
                    <i class="fas fa-receipt crm-icon"></i>
                    <div class="crm-label">Receipt</div>
                </div>
            </a>

            <!-- Work Completion -->
            <div>
                <div class="crm-box" onclick="toggleWorkOptions()">
                    <i class="fas fa-tasks crm-icon"></i>
                    <div class="crm-label">Work Completion</div>
                </div>

                <div id="workOptions" style="display:none;">
                    <button class="btn btn-success btn-sm mt-2" onclick="selectWork('yes')">Yes</button>
                    <button class="btn btn-danger btn-sm mt-2" onclick="selectWork('no')">No</button>
                </div>
            </div>

            <!-- Image -->
            <div>
                <div class="crm-box" onclick="toggleImageUpload()">
                    <i class="fas fa-image crm-icon"></i>
                    <div class="crm-label">Image</div>
                </div>

                <div id="imageUploadBox" style="display:none;">
                    <form id="imageForm" method="POST" enctype="multipart/form-data">
                        {% csrf_token %}
                        <input type="file" name="image" class="form-control form-control-sm mt-2" required>
                        <button type="submit" class="btn btn-warning btn-sm w-100 mt-2">Upload</button>
                    </form>
                </div>
            </div>

            <!-- Check-Out -->
            <a id="checkout_link" href="#" class="crm-link" onclick="return checkoutAction()">
                <div id="checkout_btn" class="crm-box">
                    <i class="fas fa-sign-out-alt crm-icon"></i>
                    <div class="crm-label">Check-Out</div>
                </div>
            </a>

        </div>

    </div>
</div>

<script src="{% static 'js/checkin.js' %}"></script>

{% endblock %}
